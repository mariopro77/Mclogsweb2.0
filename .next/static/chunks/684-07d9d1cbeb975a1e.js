(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{5647:(e,t,r)=>{var o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=o.DOMException}return e.prototype=o,new e}();!function(e){!function(t){var r=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r&&r,o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(o.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function d(e){var t=new FileReader,r=l(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(o.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;o.arrayBuffer&&o.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(d)}),this.text=function(){var e,t,r,o=c(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,r=l(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),o=0;o<t.length;o++)r[o]=String.fromCharCode(t[o]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},o.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=s(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[s(e)]},f.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},f.prototype.set=function(e,t){this.map[s(e)]=a(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},f.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},o.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,o,n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new f(t.headers)),this.method=(o=(r=t.method||this.method||"GET").toUpperCase(),y.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function v(e,t){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},h.call(b.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];v.redirect=function(e,t){if(-1===g.indexOf(t))throw RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,n){return new Promise(function(i,s){var u=new b(e,n);if(u.signal&&u.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function l(){c.abort()}c.onload=function(){var e,t,r={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();t.append(o,n)}}),t)};r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var o="response"in c?c.response:c.responseText;setTimeout(function(){i(new v(o,r))},0)},c.onerror=function(){setTimeout(function(){s(TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){s(TypeError("Network request failed"))},0)},c.onabort=function(){setTimeout(function(){s(new t.DOMException("Aborted","AbortError"))},0)},c.open(u.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(u.url),!0),"include"===u.credentials?c.withCredentials=!0:"omit"===u.credentials&&(c.withCredentials=!1),"responseType"in c&&(o.blob?c.responseType="blob":o.arrayBuffer&&u.headers.get("Content-Type")&&-1!==u.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof f?u.headers.forEach(function(e,t){c.setRequestHeader(t,e)}):Object.getOwnPropertyNames(n.headers).forEach(function(e){c.setRequestHeader(e,a(n.headers[e]))}),u.signal&&(u.signal.addEventListener("abort",l),c.onreadystatechange=function(){4===c.readyState&&u.signal.removeEventListener("abort",l)}),c.send(void 0===u._bodyInit?null:u._bodyInit)})}w.polyfill=!0,r.fetch||(r.fetch=w,r.Headers=f,r.Request=b,r.Response=v),t.Headers=f,t.Request=b,t.Response=v,t.fetch=w}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=o.fetch?o:n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},5565:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var o=r(4146),n=r.n(o)},6046:(e,t,r)=>{"use strict";var o=r(6658);r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},4146:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return u},getImageProps:function(){return a}});let o=r(306),n=r(666),i=r(7970),s=o._(r(5514));function a(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let u=i.Image},6921:(e,t,r)=>{var o;if("function"==typeof fetch&&(o=void 0!==r.g&&r.g.fetch?r.g.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"==typeof window){var n=o||r(5647);n.default&&(n=n.default),t.default=n,e.exports=t.default}},5683:(e,t,r)=>{"use strict";r.d(t,{N:()=>m});var o=r(5155),n=r(2115),i=r(9656),s=r(9234),a=r(7249);class u extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function f(e){let{children:t,isPresent:r}=e,i=(0,n.useId)(),s=(0,n.useRef)(null),f=(0,n.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,n.useContext)(a.Q);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:o,left:n}=f.current;if(r||!s.current||!e||!t)return;s.current.dataset.motionPopId=i;let a=document.createElement("style");return c&&(a.nonce=c),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            top: ${o}px !important;
            left: ${n}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[r]),(0,o.jsx)(u,{isPresent:r,childRef:s,sizeRef:f,children:n.cloneElement(t,{ref:s})})}let c=e=>{let{children:t,initial:r,isPresent:a,onExitComplete:u,custom:c,presenceAffectsLayout:d,mode:p}=e,h=(0,s.M)(l),y=(0,n.useId)(),b=(0,n.useCallback)(e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;u&&u()},[h,u]),m=(0,n.useMemo)(()=>({id:y,initial:r,isPresent:a,custom:c,onExitComplete:b,register:e=>(h.set(e,!1),()=>h.delete(e))}),d?[Math.random(),b]:[a,b]);return(0,n.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[a]),n.useEffect(()=>{a||h.size||!u||u()},[a]),"popLayout"===p&&(t=(0,o.jsx)(f,{isPresent:a,children:t})),(0,o.jsx)(i.t.Provider,{value:m,children:t})};function l(){return new Map}var d=r(4710),p=r(5749);let h=e=>e.key||"";function y(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}var b=r(5403);let m=e=>{let{children:t,exitBeforeEnter:r,custom:i,initial:a=!0,onExitComplete:u,presenceAffectsLayout:f=!0,mode:l="sync"}=e;(0,p.V)(!r,"Replace exitBeforeEnter with mode='wait'");let m=(0,n.useMemo)(()=>y(t),[t]),v=m.map(h),g=(0,n.useRef)(!0),w=(0,n.useRef)(m),O=(0,s.M)(()=>new Map),[P,E]=(0,n.useState)(m),[j,x]=(0,n.useState)(m);(0,b.E)(()=>{g.current=!1,w.current=m;for(let e=0;e<j.length;e++){let t=h(j[e]);v.includes(t)?O.delete(t):!0!==O.get(t)&&O.set(t,!1)}},[j,v.length,v.join("-")]);let T=[];if(m!==P){let e=[...m];for(let t=0;t<j.length;t++){let r=j[t],o=h(r);v.includes(o)||(e.splice(t,0,r),T.push(r))}"wait"===l&&T.length&&(e=T),x(y(e)),E(m);return}let{forceRender:A}=(0,n.useContext)(d.L);return(0,o.jsx)(o.Fragment,{children:j.map(e=>{let t=h(e),r=m===j||v.includes(t);return(0,o.jsx)(c,{isPresent:r,initial:(!g.current||!!a)&&void 0,custom:r?void 0:i,presenceAffectsLayout:f,mode:l,onExitComplete:r?void 0:()=>{if(!O.has(t))return;O.set(t,!0);let e=!0;O.forEach(t=>{t||(e=!1)}),e&&(null==A||A(),x(w.current),u&&u())},children:e},t)})})}},3479:(e,t,r)=>{"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{A:()=>T});var n,i,s,a=[];function u(){return"function"==typeof XMLHttpRequest||("undefined"==typeof XMLHttpRequest?"undefined":o(XMLHttpRequest))==="object"}a.forEach,a.slice;var f=r(6921),c=r.t(f,2);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var o,n;o=t,n=r[t],(o=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=p(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(o))in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof fetch&&(n="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),u()&&("undefined"!=typeof global&&global.XMLHttpRequest?i=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(i=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?s=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(s=window.ActiveXObject)),n||!c||i||s||(n=f||c),"function"!=typeof n&&(n=void 0);var h=function(e,t){if(t&&"object"===p(t)){var r="";for(var o in t)r+="&"+encodeURIComponent(o)+"="+encodeURIComponent(t[o]);if(!r)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+r.slice(1)}return e},y=function(e,t,r,o){var i=function(e){if(!e.ok)return r(e.statusText||"Error",{status:e.status});e.text().then(function(t){r(null,{status:e.status,data:t})}).catch(r)};if(o){var s=o(e,t);if(s instanceof Promise){s.then(i).catch(r);return}}"function"==typeof fetch?fetch(e,t).then(i).catch(r):n(e,t).then(i).catch(r)},b=!1,m=function(e,t,r,o){e.queryStringParams&&(t=h(t,e.queryStringParams));var n=d({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"==typeof window&&"undefined"!=typeof global&&void 0!==global.process&&global.process.versions&&global.process.versions.node&&(n["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(n["Content-Type"]="application/json");var i="function"==typeof e.requestOptions?e.requestOptions(r):e.requestOptions,s=d({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:n},b?{}:i),a="function"==typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{y(t,s,o,a)}catch(e){if(!i||0===Object.keys(i).length||!e.message||0>e.message.indexOf("not implemented"))return o(e);try{Object.keys(i).forEach(function(e){delete s[e]}),y(t,s,o,a),b=!0}catch(e){o(e)}}},v=function(e,t,r,o){r&&"object"===p(r)&&(r=h("",r).slice(1)),e.queryStringParams&&(t=h(t,e.queryStringParams));try{(n=i?new i:new s("MSXML2.XMLHTTP.3.0")).open(r?"POST":"GET",t,1),e.crossDomain||n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.withCredentials=!!e.withCredentials,r&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.overrideMimeType&&n.overrideMimeType("application/json");var n,a=e.customHeaders;if(a="function"==typeof a?a():a)for(var u in a)n.setRequestHeader(u,a[u]);n.onreadystatechange=function(){n.readyState>3&&o(n.status>=400?n.statusText:null,{status:n.status,data:n.responseText})},n.send(r)}catch(e){console&&console.log(e)}};let g=function(e,t,r,o){return("function"==typeof r&&(o=r,r=void 0),o=o||function(){},n&&0!==t.indexOf("file:"))?m(e,t,r,o):u()||"function"==typeof ActiveXObject?v(e,t,r,o):void o(Error("No fetch and no xhr implementation found!"))};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=w(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}var x=function(){var e,t;return e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.services=t,this.options=r,this.allOptions=o,this.type="backend",this.init(t,r,o)},t=[{key:"init",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=P(P(P({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,r){return E({},t,r||"")},parseLoadPayload:function(e,t){},request:g,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),r),this.allOptions=o,this.services&&this.options.reloadInterval){var n=setInterval(function(){return t.reload()},this.options.reloadInterval);"object"===w(n)&&"function"==typeof n.unref&&n.unref()}}},{key:"readMulti",value:function(e,t,r){this._readAny(e,e,t,t,r)}},{key:"read",value:function(e,t,r){this._readAny([e],e,[t],t,r)}},{key:"_readAny",value:function(e,t,r,o,n){var i,s,a=this,u=this.options.loadPath;"function"==typeof this.options.loadPath&&(u=this.options.loadPath(e,r)),(u=(s=i=u)&&"function"==typeof s.then?i:Promise.resolve(i)).then(function(i){if(!i)return n(null,{});var s=a.services.interpolator.interpolate(i,{lng:e.join("+"),ns:r.join("+")});a.loadUrl(s,n,t,o)})}},{key:"loadUrl",value:function(e,t,r,o){var n=this,i=this.options.parseLoadPayload("string"==typeof r?[r]:r,"string"==typeof o?[o]:o);this.options.request(this.options,e,i,function(i,s){if(s&&(s.status>=500&&s.status<600||!s.status))return t("failed loading "+e+"; status code: "+s.status,!0);if(s&&s.status>=400&&s.status<500)return t("failed loading "+e+"; status code: "+s.status,!1);if(!s&&i&&i.message){var a,u,f=i.message.toLowerCase();if(["failed","fetch","network","load"].find(function(e){return f.indexOf(e)>-1}))return t("failed loading "+e+": "+i.message,!0)}if(i)return t(i,!1);try{a="string"==typeof s.data?n.options.parse(s.data,r,o):s.data}catch(t){u="failed parsing "+e+" to json"}if(u)return t(u,!1);t(null,a)})}},{key:"create",value:function(e,t,r,o,n){var i=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var s=this.options.parsePayload(t,r,o),a=0,u=[],f=[];e.forEach(function(r){var o=i.options.addPath;"function"==typeof i.options.addPath&&(o=i.options.addPath(r,t));var c=i.services.interpolator.interpolate(o,{lng:r,ns:t});i.options.request(i.options,c,s,function(t,r){a+=1,u.push(t),f.push(r),a===e.length&&"function"==typeof n&&n(u,f)})})}}},{key:"reload",value:function(){var e=this,t=this.services,r=t.backendConnector,o=t.languageUtils,n=t.logger,i=r.language;if(!i||"cimode"!==i.toLowerCase()){var s=[],a=function(e){o.toResolveHierarchy(e).forEach(function(e){0>s.indexOf(e)&&s.push(e)})};a(i),this.allOptions.preload&&this.allOptions.preload.forEach(function(e){return a(e)}),s.forEach(function(t){e.allOptions.ns.forEach(function(e){r.read(t,e,"read",null,null,function(o,i){o&&n.warn("loading namespace ".concat(e," for language ").concat(t," failed"),o),!o&&i&&n.log("loaded namespace ".concat(e," for language ").concat(t),i),r.loaded("".concat(t,"|").concat(e),o,i)})})})}}}],function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,j(o.key),o)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();x.type="backend";let T=x}}]);